@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');

:root {
    /* Light Mode Colors */
    --light-primary-color:#081b29; //#6a0572 /* Dark Purple */
    --light-accent-color: #a42c8d; /* Lighter Purple */
    --light-background-color: #f0f2f5;
    --light-chat-bg: #e6e6e6;
    --light-message-bg-self: #93f1f8; /* Light green */
    --light-message-bg-other: #ffffff;
    --light-text-color: #333333;
    --light-border-color: #dddddd;
    --light-input-bg: #ffffff;
    --light-header-bg: #ffffff;
    --light-shadow-color: rgba(0, 0, 0, 0.1);

    /* Dark Mode Colors */
    --dark-primary-color: #081b29; /* Purple */
    --dark-accent-color: #ab47bc; /* Lighter Purple */
    --dark-background-color: #1a1a2e; /* Dark Blue */
    --dark-chat-bg: #16213e; /* Even darker blue */
    --dark-message-bg-self: #ffffff; //#3f0071; /* Darker Purple */
    --dark-message-bg-other: #454d65; /* Dark Blue-Gray */
    --dark-text-color: #e0e0e0;
    --dark-border-color: #3f476a;
    --dark-input-bg: #2b3a5a;
    --dark-header-bg: #16213e;
    --dark-shadow-color: rgba(0, 0, 0, 0.4);

    /* General */
    --border-radius-bubble: 15px;
    --input-height: 48px;
}

/* Light Mode Defaults */
body {
    font-family: 'Cairo', sans-serif;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: var(--light-background-color);
    color: var(--light-text-color);
    direction: rtl; /* For Arabic layout */
    transition: background-color 0.3s ease, color 0.3s ease;
}

/* Dark Mode Overrides */
body.dark-mode {
    background-color: var(--dark-background-color);
    color: var(--dark-text-color);

    .chat-container {
        background-color: var(--dark-chat-bg);
        border: 1px solid var(--dark-border-color);
        box-shadow: 0 10px 40px var(--dark-shadow-color);
    }
    .chat-header {
        background-color: var(--dark-header-bg);
        border-bottom: 1px solid var(--dark-border-color);
        color: var(--dark-text-color);
    }
    .chat-input-area {
        background-color: var(--dark-header-bg);
        border-top: 1px solid var(--dark-border-color);
    }
    #message-input {
        background-color: var(--dark-input-bg);
        color: var(--dark-text-color);
        border-color: var(--dark-border-color);
    }
    #message-input::placeholder {
        color: #b0b0b0;
    }
    .message-bubble.self {
        background-color: var(--dark-message-bg-self);
        color: black;
    }
    .message-bubble.other {
        background-color: var(--dark-message-bg-other);
        color: var(--dark-text-color);
    }
    .icon-button {
        color: var(--dark-text-color);
    }
    .icon-button:hover {
        background-color: rgba(255, 255, 255, 0.1);
    }

    /* Modal Dark Mode */
    .modal-content {
        background-color: var(--dark-header-bg);
        border: 1px solid var(--dark-border-color);
        box-shadow: 0 10px 40px var(--dark-shadow-color);
    }
    .modal-header {
        background-color: var(--dark-input-bg);
        border-bottom: 1px solid var(--dark-border-color);
    }
    .modal-header h2 {
        color: var(--dark-text-color);
    }
    .modal-body label, .modal-body span {
        color: var(--dark-text-color);
    }
    .modal-body input[type="text"] {
        background-color: var(--dark-input-bg);
        color: var(--dark-text-color);
        border-color: var(--dark-border-color);
    }
    .save-name-button {
        background-color: var(--dark-primary-color);
    }
    .message-context-menu {
        background-color: var(--dark-input-bg);
        border: 1px solid var(--dark-border-color);
        box-shadow: 0 4px 15px var(--dark-shadow-color);
    }
    .message-context-menu button {
        color: var(--dark-text-color);
    }
    .message-context-menu button:hover {
        background-color: var(--dark-message-bg-other);
    }
    .message-bubble.selected {
        outline: 2px solid var(--dark-primary-color);
    }

    
}


/* Chat Container */
.chat-container {
    display: flex;
    flex-direction: column;
    width: 100%;
    max-width: 700px;
    height: 90vh; /* Adjust as needed */
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 0 5px 25px var(--light-shadow-color);
    background-color: var(--light-chat-bg);
    border: 1px solid var(--light-border-color);
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Header */
.chat-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background-color: var(--light-header-bg);
    border-bottom: 1px solid var(--light-border-color);
    color: var(--light-text-color);
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
}

.chat-header h1 {
    font-size: 1.5em;
    margin: 0;
    font-weight: 700;
}

.header-actions {
    display: flex;
    gap: 10px;
}

.icon-button {
    background: none;
    border: none;
    font-size: 1.2em;
    cursor: pointer;
    color: var(--light-primary-color);
    padding: 8px;
    border-radius: 50%;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.icon-button:hover {
    background-color: rgba(0, 0, 0, 0.05);
}

/* Main Chat Area */
.chat-main {
    flex-grow: 1;
    overflow-y: auto;
    padding: 20px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.message-list {
    display: flex;
    flex-direction: column;
    gap: 10px;
}

/* Message Bubbles */
.message-bubble {
    max-width: 80%;
    padding: 10px 15px;
    border-radius: var(--border-radius-bubble);
    word-wrap: break-word;
    font-size: 0.95em;
    line-height: 1.4;
    position: relative;
    cursor: pointer; /* For selection */
    transition: background-color 0.3s ease, color 0.3s ease, outline 0.1s ease;
}

.message-bubble.self {
    align-self: flex-end; /* Align to right for RTL */
    background-color: var(--light-message-bg-self);
    color: var(--light-text-color);
    border-bottom-left-radius: 5px; /* Adjust bubble corner */
}

.message-bubble.other {
    align-self: flex-start; /* Align to left for RTL */
    background-color: var(--light-message-bg-other);
    color: var(--light-text-color);
    border-bottom-right-radius: 5px; /* Adjust bubble corner */
}

.message-bubble.selected {
    outline: 2px solid var(--light-primary-color);
    outline-offset: 2px;
}

.message-bubble .timestamp {
    display: block;
    font-size: 0.75em;
    color: #888;
    text-align: end; /* Align to end of bubble */
    margin-top: 5px;
}

.message-bubble.self .timestamp {
    text-align: start; /* Align to start for RTL self bubbles */
}

.message-bubble .file-preview {
    display: flex;
    align-items: center;
    gap: 8px;
    background-color: rgba(0,0,0,0.05);
    padding: 8px;
    border-radius: 8px;
    margin-top: 5px;
}
.message-bubble .file-preview i {
    font-size: 1.2em;
    color: #666;
}
.message-bubble .file-preview span {
    font-weight: bold;
}
.dark-mode .message-bubble .file-preview {
    background-color: rgba(255,255,255,0.1);
}
.dark-mode .message-bubble .file-preview i,
.dark-mode .message-bubble .file-preview span {
    color: var(--dark-text-color);
}


/* Chat Input Area */
.chat-input-area {
    display: flex;
    align-items: center;
    padding: 10px 20px;
    background-color: var(--light-header-bg);
    border-top: 1px solid var(--light-border-color);
    gap: 10px;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}

#message-input {
    flex-grow: 1;
    border: 1px solid var(--light-border-color);
    border-radius: 20px;
    padding: 10px 15px;
    font-size: 1em;
    resize: none; /* Disable manual resize */
    overflow-y: hidden; /* Hide scrollbar but allow content to overflow */
    min-height: var(--input-height);
    max-height: 150px; /* Limit height of textarea */
    background-color: var(--light-input-bg);
    color: var(--light-text-color);
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}

#message-input:focus {
    outline: none;
    border-color: var(--light-primary-color);
}

.file-upload-button {
    font-size: 1.5em; /* Larger icon for file */
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
}
.send-button {
    background-color: var(--light-primary-color);
    color: white;
    font-size: 1.5em; /* Larger icon for send */
    width: var(--input-height);
    height: var(--input-height);
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background-color 0.3s ease;
}
.send-button:hover {
    background-color: var(--dark-border-color);
}


/* Settings Modal */
.modal-overlay {
    display: none; /* Hidden by default */
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    justify-content: center;
    align-items: center;
    z-index: 1000;
}

.modal-content {
    background-color: var(--light-header-bg);
    border-radius: 10px;
    box-shadow: 0 10px 30px var(--light-shadow-color);
    width: 90%;
    max-width: 400px;
    overflow: hidden;
    transform: translateY(-50px);
    opacity: 0;
    transition: transform 0.3s ease, opacity 0.3s ease;
}

.modal-overlay.active .modal-content {
    transform: translateY(0);
    opacity: 1;
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 15px 20px;
    background-color: var(--light-background-color);
    border-bottom: 1px solid var(--light-border-color);
}

.modal-header h2 {
    margin: 0;
    font-size: 1.3em;
    color: var(--light-primary-color);
}

.close-modal-button {
    font-size: 1.2em;
    color: #666;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
}
.close-modal-button:hover {
    background-color: rgba(0, 0, 0, 0.08);
    
}

.modal-body {
    padding: 20px;
}

.setting-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 15px;
    padding-bottom: 15px;
    border-bottom: 1px dashed var(--light-border-color);
}
.setting-item:last-child {
    margin-bottom: 0;
    padding-bottom: 0;
    border-bottom: none;
}

.setting-item label, .setting-item span {
    font-weight: 600;
    color: var(--light-text-color);
}

.modal-body input[type="text"] {
    flex-grow: 1;
    margin: 0 10px;
    padding: 8px 12px;
    border: 1px solid var(--light-border-color);
    border-radius: 5px;
    background-color: var(--light-input-bg);
    color: var(--light-text-color);
}

.save-name-button {
    background-color: var(--light-primary-color);
    color: white;
    border: none;
    padding: 8px 15px;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
}
.save-name-button:hover {
    background-color: var(--dark-border-color);
}

/* Dark Mode Toggle Switch */
.switch {
    position: relative;
    display: inline-block;
    width: 50px;
    height: 28px;
}

.switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #ccc;
    transition: .4s;
}

.slider:before {
    position: absolute;
    content: "";
    height: 20px;
    width: 20px;
    left: 4px;
    bottom: 4px;
    background-color: white;
    transition: .4s;
}

input:checked + .slider {
    background-color: var(--light-primary-color);
}

input:focus + .slider {
    box-shadow: 0 0 1px var(--light-primary-color);
}

input:checked + .slider:before {
    transform: translateX(22px);
}

.slider.round {
    border-radius: 28px;
}

.slider.round:before {
    border-radius: 50%;
}


/* Message Context Menu */
.message-context-menu {
    display: none; /* Hidden by default */
    position: absolute;
    background-color: var(--light-input-bg);
    border: 1px solid var(--light-border-color);
    border-radius: 8px;
    box-shadow: 0 4px 15px var(--light-shadow-color);
    padding: 5px 0;
    z-index: 999;
}

.message-context-menu button {
    display: flex;
    align-items: center;
    gap: 10px;
    width: 100%;
    padding: 10px 15px;
    border: none;
    background: none;
    text-align: right; /* Adjust for RTL */
    cursor: pointer;
    font-size: 0.9em;
    color: var(--light-text-color);
    transition: background-color 0.2s ease;
}

.message-context-menu button:hover {
    background-color: var(--light-background-color);
}

.message-context-menu button i {
    font-size: 1.1em;
}

/* الصور داخل الرسائل */
.message-file img.chat-image {
    max-width: 200px;  /* أو أي حجم مناسب */
    max-height: 200px;
    border-radius: 8px;
    display: block;
    margin-top: 5px;
}

/* الفيديوهات داخل الرسائل */
.message-file video.chat-video {
    max-width: 300px;  /* أو أي حجم مناسب */
    max-height: 200px;
    border-radius: 8px;
    display: block;
    margin-top: 5px;
}

/* الصوتيات داخل الرسائل */
.message-file audio {
    width: 200px;  /* حجم مشغل الصوت */
    margin-top: 5px;
    display: block;
}

/* Responsive Adjustments */
@media (max-width: 768px) {
    .chat-container {
        width: 100%;
        height: 100vh;
        border-radius: 0;
        box-shadow: none;
    }
    .chat-header {
        padding: 12px 15px;
    }
    .chat-header h1 {
        font-size: 1.3em;
    }
    .chat-main {
        padding: 15px;
    }
    .chat-input-area {
        padding: 8px 15px;
    }
    #message-input {
        padding: 8px 12px;
        min-height: 40px;
    }
    .send-button, .file-upload-button {
        width: 40px;
        height: 40px;
        font-size: 1.3em;
    }
    .modal-content {
        width: 95%;
    }
}
.logoutButton {
  --figure-duration: 100ms;
  --transform-figure: none;
  --walking-duration: 100ms;
  --transform-arm1: none;
  --transform-wrist1: none;
  --transform-arm2: none;
  --transform-wrist2: none;
  --transform-leg1: none;
  --transform-calf1: none;
  --transform-leg2: none;
  --transform-calf2: none;

  background: none;
  border: 0;
  color: #f4f7ff;
  cursor: pointer;
  display: block;
  font-family: 'Quicksand', sans-serif;
  font-size: 14px;
  font-weight: 500;
  height: 40px;
  outline: none;
  padding: 0 0 0 20px;
  perspective: 100px;
  position: relative;
  text-align: left;
  width: 130px;
  -webkit-tap-highlight-color: transparent;
}

.logoutButton::before {
  background-color: #ffffff17;
  border-radius: 5px;
  content: '';
  display: block;
  height: 100%;
  left: 0;
  position: absolute;
  top: 0;
  transform: none;
  transition: transform 50ms ease;
  width: 100%;
  z-index: 2;
}

.logoutButton:hover .door {
  transform: rotateY(20deg);
}

.logoutButton:active::before {
  transform: scale(.96);
}

.logoutButton:active .door {
  transform: rotateY(28deg);
}

.logoutButton.clicked::before {
  transform: none;
}

.logoutButton.clicked .door {
  transform: rotateY(35deg);
}

.logoutButton.door-slammed .door {
  transform: none;
  transition: transform 100ms ease-in 250ms;
}

.logoutButton.falling {
  animation: shake 200ms linear;
}

.logoutButton.falling .bang {
  animation: flash 300ms linear;
}

.logoutButton.falling .figure {
  animation: spin 1000ms infinite linear;
  bottom: -1080px;
  opacity: 0;
  right: 1px;
  transition: transform calc(var(--figure-duration) * 1ms) linear,
    bottom calc(var(--figure-duration) * 1ms) cubic-bezier(0.7, 0.1, 1, 1) 100ms,
    opacity calc(var(--figure-duration) * 0.25ms) linear calc(var(--figure-duration) * 0.75ms);
  z-index: 1;
}

.logoutButton--light::before {
  background-color: #f4f7ff;
}

.logoutButton--light .button-text {
  color: #1f2335;
}

.logoutButton--light .door, .logoutButton--light .doorway {
  fill: #1f2335;
}

.button-text {
  color: #f4f7ff;
  font-weight: 500;
  position: relative;
  z-index: 10;
}

svg {
  display: block;
  position: absolute;
}

.figure {
  bottom: 5px;
  fill: #4371f7;
  right: 18px;
  transform: var(--transform-figure);
  transition: transform calc(var(--figure-duration) * 1ms) cubic-bezier(0.2, 0.1, 0.80, 0.9);
  width: 30px;
  z-index: 4;
}

.door, .doorway {
  bottom: 4px;
  fill: #f4f7ff;
  right: 12px;
  width: 32px;
}

.door {
  transform: rotateY(20deg);
  transform-origin: 100% 50%;
  transform-style: preserve-3d;
  transition: transform 200ms ease;
  z-index: 5;
}

.door path {
  fill: #4371f7;
  stroke: #4371f7;
  stroke-width: 4;
}

.doorway {
  z-index: 3;
}

.bang {
  opacity: 0;
}

.arm1, .wrist1, .arm2, .wrist2, .leg1, .calf1, .leg2, .calf2 {
  transition: transform calc(var(--walking-duration) * 1ms) ease-in-out;
}

.arm1 {
  transform: var(--transform-arm1);
  transform-origin: 52% 45%;
}

.wrist1 {
  transform: var(--transform-wrist1);
  transform-origin: 59% 55%;
}

.arm2 {
  transform: var(--transform-arm2);
  transform-origin: 47% 43%;
}

.wrist2 {
  transform: var(--transform-wrist2);
  transform-origin: 35% 47%;
}

.leg1 {
  transform: var(--transform-leg1);
  transform-origin: 47% 64.5%;
}

.calf1 {
  transform: var(--transform-calf1);
  transform-origin: 55.5% 71.5%;
}

.leg2 {
  transform: var(--transform-leg2);
  transform-origin: 43% 63%;
}

.calf2 {
  transform: var(--transform-calf2);
  transform-origin: 41.5% 73%;
}

@keyframes spin {
  from { transform: rotate(0deg) scale(0.94); }
  to { transform: rotate(359deg) scale(0.94); }
}

@keyframes shake {
  0% { transform: rotate(-1deg); }
  50% { transform: rotate(2deg); }
  100% { transform: rotate(-1deg); }
}

@keyframes flash {
  0% { opacity: 0.4; }
  100% { opacity: 0; }
}

html, body {
  height: 100%;
}

body {
  align-items: center;
 // background: #00091F;
  display: flex;
  justify-content: center;
  overflow: hidden;
  -webkit-font-smoothing: antialiased;
}

.background {
  align-items: center;
  display: flex;
  height: 100%;
  justify-content: center;
  width: 50%;
}

button {
  margin: 20px;
}

.message-item {
    display: flex;
    flex-direction: column;
    max-width: 70%;
    margin: 10px;
    padding: 8px 12px;
    border-radius: 15px;
    font-family: 'Segoe UI', sans-serif;
    font-size: 15px;
    position: relative;
    word-wrap: break-word;
}

.my-message {
    align-self: flex-end;
    background-color: #d0e6ff;
    color: #000;
    border-top-left-radius: 15px;
    border-top-right-radius: 0;
    border-bottom-left-radius: 15px;
    border-bottom-right-radius: 15px;
}

.other-message {
    align-self: flex-start;
    background-color: #f1f1f1;
    color: #000;
    border-top-left-radius: 0;
    border-top-right-radius: 15px;
    border-bottom-left-radius: 15px;
    border-bottom-right-radius: 15px;
}

.message-time {
    font-size: 12px;
    color: #666;
    margin-top: 4px;
    align-self: flex-end;
}

.message-user {
    font-weight: bold;
    color: #333;
    display: block;
    margin-bottom: 4px;
}

body:not(.dark-mode) .logoutButton {
    color: #000;
}

body:not(.dark-mode) .logoutButton i {
    color: #000;
}


